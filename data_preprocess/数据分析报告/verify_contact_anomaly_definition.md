wanting@jerry:~/Time-Series-Library$ pym verify_contact_anomaly_definition.py
▶️ Running: python3 -m verify_contact_anomaly_definition
[2025-06-25 21:51:02,337] [INFO] [default] - Logger initialized. Log file: experiments/logs/default_20250625_215102.log
[2025-06-25 21:51:02,337] [INFO] [default] - 验证Contact异常定义...
[2025-06-25 21:51:02,386] [INFO] [default] - 测试数据形状: (134700, 27)
[2025-06-25 21:51:02,386] [INFO] [default] - 异常样本数: 6951 / 134700 (5.16%)
[2025-06-25 21:51:02,414] [INFO] [default] - 
=== 统计特性对比 ===
[2025-06-25 21:51:02,414] [INFO] [default] - 正常样本统计:
[2025-06-25 21:51:02,414] [INFO] [default] -   数量: 127749
[2025-06-25 21:51:02,419] [INFO] [default] -   均值范围: [-0.0234, 0.0352]
[2025-06-25 21:51:02,438] [INFO] [default] -   标准差范围: [0.9999, 1.0205]
[2025-06-25 21:51:02,443] [INFO] [default] -   方差总和: 1.0210
[2025-06-25 21:51:02,443] [INFO] [default] - 
异常样本统计:
[2025-06-25 21:51:02,443] [INFO] [default] -   数量: 6951
[2025-06-25 21:51:02,443] [INFO] [default] -   均值范围: [-0.6471, 0.4305]
[2025-06-25 21:51:02,444] [INFO] [default] -   标准差范围: [0.2747, 0.9940]
[2025-06-25 21:51:02,444] [INFO] [default] -   方差总和: 0.5939
[2025-06-25 21:51:02,444] [INFO] [default] - 
=== 无监督异常检测验证 ===
[2025-06-25 21:51:02,954] [INFO] [default] - Isolation Forest一致性: 0.9022
[2025-06-25 21:51:02,986] [INFO] [default] - PCA重构误差一致性: 0.9023
[2025-06-25 21:51:02,986] [INFO] [default] - 
=== 错误分类分析 ===
[2025-06-25 21:51:02,987] [INFO] [default] - 被标记为正常但重构误差高的样本: 72429
[2025-06-25 21:51:02,987] [INFO] [default] - 被标记为异常但重构误差低的样本: 4035
[2025-06-25 21:51:02,987] [INFO] [default] - 
=== 特征级异常分析 ===
[2025-06-25 21:51:03,005] [WARNING] [default] - 发现可疑特征（异常样本更接近均值）:
[2025-06-25 21:51:03,005] [WARNING] [default] -   aCosPhi_L2: 比值=1.70
[2025-06-25 21:51:03,005] [WARNING] [default] -   aCosPhi_L1: 比值=1.59
[2025-06-25 21:51:03,005] [WARNING] [default] -   aCosPhi_L3: 比值=1.49
[2025-06-25 21:51:03,005] [WARNING] [default] -   aCurrentL1: 比值=1.37
[2025-06-25 21:51:03,005] [WARNING] [default] -   airTempeatur: 比值=1.37
[2025-06-25 21:51:03,005] [INFO] [default] - 
=== 时序模式分析 ===
[2025-06-25 21:51:03,010] [INFO] [default] - 正常样本平均变化率: 0.5972
[2025-06-25 21:51:03,010] [INFO] [default] - 异常样本平均变化率: 0.5185
[2025-06-25 21:51:03,010] [INFO] [default] - 
=== 结论 ===
[2025-06-25 21:51:03,010] [INFO] [default] - 
建议：
[2025-06-25 21:51:03,010] [INFO] [default] -   1. 重新审视异常的定义和标注过程
[2025-06-25 21:51:03,010] [INFO] [default] -   2. 考虑使用监督学习方法而非重构方法
[2025-06-25 21:51:03,010] [INFO] [default] -   3. 分析原始时间序列数据而非静态特征
[2025-06-25 21:51:03,010] [INFO] [default] -   4. 与数据提供方确认异常的具体含义



🚨 核心问题：异常样本实际上更"简单"
正常样本统计:
  方差总和: 1.0210
  
异常样本统计:  
  方差总和: 0.5939  (明显更小！)
  
这说明什么？
异常样本变化更小、更规律
正常样本反而更复杂、变化更大
这与传统的"异常=复杂"假设相反
🎯 为什么TimesNet失败？
TimesNet基于重构误差的异常检测假设：
🔴 假设：异常样本难以重构 → 重构误差大
🔴 现实：Contact的异常样本更简单 → 重构误差小
所以TimesNet会错误地将：
❌ 复杂的正常样本判断为异常
❌ 简单的异常样本判断为正常